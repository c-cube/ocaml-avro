<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Encode (avro.Avro.Obj_container_file.Encode)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">avro</a> &#x00BB; <a href="../../index.html">Avro</a> &#x00BB; <a href="../index.html">Obj_container_file</a> &#x00BB; Encode</nav><header class="odoc-preamble"><h1>Module <code><span>Obj_container_file.Encode</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Closed" class="anchored"><a href="#exception-Closed" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Closed</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-make" class="anchored"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span>?max_block_count:int <span class="arrow">&#45;&gt;</span></span> <span>?buf_size:int <span class="arrow">&#45;&gt;</span></span> <span>?pool:<span class="xref-unresolved">Avro__Iobuf.Pool.t</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Output/index.html#type-t">Output.t</a> <span class="arrow">&#45;&gt;</span></span> <span>schema:string <span class="arrow">&#45;&gt;</span></span>
<span>write:<span>(<span><a href="../../Output/index.html#type-t">Output.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>make a new encoder.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">write</span> <p>the row type writer</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">schema</span> <p>the json schema</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">pool</span> <p>pool of buffers to use internally</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">buf_size</span> <p>size of buffers if <code>pool</code> is not provided</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">max_block_count</span> <p>forces a flush whenever there are that many elements in the current block.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-push" class="anchored"><a href="#val-push" class="anchor"></a><code><span><span class="keyword">val</span> push : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>push enc x</code> pushes a row into <code>enc</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Closed</span> <p>if the encoder is closed with <code>close</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-cur_block_count" class="anchored"><a href="#val-cur_block_count" class="anchor"></a><code><span><span class="keyword">val</span> cur_block_count : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>How many objects in the current block?</p></div></div><div class="odoc-spec"><div class="spec value" id="val-flush_block" class="anchored"><a href="#val-flush_block" class="anchor"></a><code><span><span class="keyword">val</span> flush_block : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Flush current block to output</p></div></div><div class="odoc-spec"><div class="spec value" id="val-close" class="anchored"><a href="#val-close" class="anchor"></a><code><span><span class="keyword">val</span> close : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>close enc</code> flushes the last block, if any, and renders the encoder unusable.</p></div></div></div></body></html>